name: "Maintenance: Issue Labeler"

on:
  workflow_dispatch:
  push:
    branches:
      - main
    paths:
      - ".github/workflows/issue-labeler.yaml"
      - ".github/settings/issue-labeler.yaml"
  issues:
    types:
      - opened

jobs:
  label-issue:
    name: Label Issue
    runs-on: ubuntu-latest
    # Skip for Renovate Dashboard and other Renovate-managed issues
    if: |
      github.event.issue.user.login != 'renovate[bot]' &&
      !contains(github.event.issue.labels.*.name, 'renovate') &&
      !contains(github.event.issue.title, 'Renovate')
    permissions:
      issues: write
    steps:
      - name: Checkout
        uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6

      - name: Labeler
        uses: github/issue-labeler@c1b0f9f52a63158c4adc09425e858e87b32e9685 # v3.4
        with:
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
          configuration-path: .github/settings/issue-labeler.yaml
          enable-versioning: false
