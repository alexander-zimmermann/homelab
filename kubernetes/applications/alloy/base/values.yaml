cluster:
  # Cluster name used in labels and metadata.
  name: homelab

## Destinations
# Remote write / push endpoints for metrics and logs.
destinations:
  - name: prometheus
    type: prometheus
    url: http://prometheus-operated.prometheus:9090/api/v1/write
  - name: loki
    type: loki
    url: http://loki-gateway.loki.svc.cluster.local/loki/api/v1/push

## Cluster metrics
clusterMetrics:
  enabled: true
  destinations:
    - prometheus
  # Kube-state-metrics resources: requests influence scheduling/QoS; limits enforce a hard cap.
  kube-state-metrics:
    resources:
      requests:
        cpu: 20m
        memory: 64Mi
      limits:
        cpu: 200m
        memory: 256Mi
  # Node exporter resources: requests influence scheduling/QoS; limits enforce a hard cap.
  node-exporter:
    resources:
      requests:
        cpu: 10m
        memory: 32Mi
      limits:
        cpu: 100m
        memory: 64Mi

## Cluster events
clusterEvents:
  enabled: true
  destinations:
    - loki

## Node and pod logs
nodeLogs:
  enabled: true
  destinations:
    - loki

podLogs:
  enabled: true
  destinations:
    - loki

## Collectors (Alloy instances)
# Alloy Metrics instance resources: requests influence scheduling/QoS; limits enforce a hard cap.
alloy-metrics:
  enabled: true
  alloy:
    resources:
      requests:
        cpu: 50m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi

## Singleton instance: intended for components that should run as a single replica (e.g. log processing).
# Alloy Singleton instance resources: requests influence scheduling/QoS; limits enforce a hard cap.
alloy-singleton:
  enabled: true
  alloy:
    resources:
      requests:
        cpu: 25m
        memory: 128Mi
      limits:
        cpu: 250m
        memory: 256Mi

## Log instance
# Alloy Log instance resources: requests influence scheduling/QoS; limits enforce a hard cap.
alloy-logs:
  enabled: true
  alloy:
    resources:
      requests:
        cpu: 25m
        memory: 128Mi
      limits:
        cpu: 300m
        memory: 384Mi

## Operator
# Alloy Operator resources: requests influence scheduling/QoS; limits enforce a hard cap.
alloy-operator:
  resources:
    requests:
      cpu: 10m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi
