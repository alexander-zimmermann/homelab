cluster:
  # Cluster name used in labels and metadata.
  name: homelab

## Destinations
# Remote write / push endpoints for metrics and logs.
destinations:
  - name: prometheus
    type: prometheus
    url: http://prometheus-operated.prometheus:9090/api/v1/write
  - name: loki
    type: loki
    url: http://loki-gateway.loki.svc.cluster.local/loki/api/v1/push

## Cluster metrics
clusterMetrics:
  enabled: true
  destinations:
    - prometheus
  # Resource settings for the bundled exporters.
  kube-state-metrics:
    resources:
      requests:
        cpu: 20m
        memory: 64Mi
      limits:
        cpu: 200m
        memory: 256Mi
  node-exporter:
    resources:
      requests:
        cpu: 10m
        memory: 32Mi
      limits:
        cpu: 100m
        memory: 64Mi

## Cluster events
clusterEvents:
  enabled: true
  destinations:
    - loki

## Node and pod logs
nodeLogs:
  enabled: true
  destinations:
    - loki

podLogs:
  enabled: true
  destinations:
    - loki

## Collectors (Alloy instances)
# Each block configures an Alloy instance; nested `alloy.resources` sets container requests/limits.
alloy-metrics:
  enabled: true
  alloy:
    resources:
      requests:
        cpu: 50m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi

## Singleton instance
# Intended for components that should run as a single replica.
alloy-singleton:
  enabled: true
  alloy:
    resources:
      requests:
        cpu: 25m
        memory: 128Mi
      limits:
        cpu: 250m
        memory: 256Mi

## Log instance
# Collects log data and ships it to the configured destination(s).
alloy-logs:
  enabled: true
  alloy:
    resources:
      requests:
        cpu: 25m
        memory: 128Mi
      limits:
        cpu: 300m
        memory: 384Mi

## Operator
# Resources for the Alloy Operator Deployment.
alloy-operator:
  resources:
    requests:
      cpu: 10m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi
