global:
  # Environment variables applied to all chart components (server, worker, etc.).
  env:
    # Database password from a Secret created by the CloudNativePG Cluster.
    - name: AUTHENTIK_POSTGRESQL__PASSWORD
      valueFrom:
        secretKeyRef:
          name: authentik-db-app
          key: password
    # Authentik internal secret key (signing/encryption).
    - name: AUTHENTIK_SECRET_KEY
      valueFrom:
        secretKeyRef:
          name: authentik-credentials
          key: AUTHENTIK_SECRET_KEY
    # Initial bootstrap admin password.
    - name: AUTHENTIK_BOOTSTRAP_PASSWORD
      valueFrom:
        secretKeyRef:
          name: authentik-credentials
          key: AUTHENTIK_BOOTSTRAP_PASSWORD

authentik:
  # Authentik application settings.
  email:
    # SMTP configuration for notifications and password resets.
    host: smtprelay.smtprelay.svc.cluster.local
    port: 25
    from: "Authentik <admin@zimmermann.sh>"

  # PostgreSQL connection settings (external DB via CloudNativePG).
  postgresql:
    # Host matches the CNPG Cluster service name ("<release>-db-rw").
    host: "{{ .Release.Name }}-db-rw"

## Resources
server:
  # Authentik server resources: requests influence scheduling/QoS; limits enforce a hard cap.
  resources:
    requests:
      cpu: 100m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 768Mi

worker:
  # Authentik worker resources: requests influence scheduling/QoS; limits enforce a hard cap.
  resources:
    requests:
      cpu: 100m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 768Mi
