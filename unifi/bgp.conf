router bgp 65100
  ! Router ID
  bgp router-id 192.168.1.1

  ! Require explicit policy for eBGP neighbors
  bgp ebgp-requires-policy

  ! Relax autonomous system path matching for multipath routing
  bgp bestpath as-path multipath-relax
  maximum-paths 3

  ! Create peer-group HOMELAB with remote ASN 65200
  neighbor HOMELAB peer-group
  neighbor HOMELAB remote-as 65200
  neighbor HOMELAB password PASSWORD

  ! Add control- & data-plane node IPs as neighbors
  neighbor 192.168.1.196 peer-group HOMELAB
  neighbor 192.168.1.132 peer-group HOMELAB
  neighbor 192.168.1.71 peer-group HOMELAB
  neighbor 192.168.1.11 peer-group HOMELAB

  ! Apply policies
  address-family ipv4 unicast
    redistribute connected
    neighbor HOMELAB activate
    neighbor HOMELAB next-hop-self
    neighbor HOMELAB soft-reconfiguration inbound
    neighbor HOMELAB route-map RM-HOMELAB-IN in
    neighbor HOMELAB route-map RM-HOMELAB-OUT out
  exit-address-family
exit

! VIPs within the service IP pool
ip prefix-list HOMELAB-IN seq 10 permit 192.168.10.0/24 le 32

! Accept Service IPs from cluster peers
route-map RM-HOMELAB-IN permit 10
  match ip address prefix-list HOMELAB-IN
exit

! Router client network
ip prefix-list HOMELAB-OUT seq 10 permit 192.168.1.0/24

! Broadcast client network for cluster peers
route-map RM-HOMELAB-OUT permit 10
  match ip address prefix-list HOMELAB-OUT
exit
